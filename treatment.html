<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Top Down Design of Treatment
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Domain library to model medical treatment"/>
    <meta name="author" content="halcwb"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/GenTreat/content/style.css" />
    <script type="text/javascript" src="/GenTreat/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/halcwb/GenTreat">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/GenTreat/index.html">GenTreat</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Top-Down-Design-of-Treatment" class="anchor" href="#Top-Down-Design-of-Treatment">Top Down Design of Treatment</a></h1>
<p>This literate script defines the top down design of a library
that facilitates treatment of patients.</p>
<p>Patient treatment is a continuous loop of the following processes:</p>
<ol>
<li>Get the patient (and patient data)</li>
<li>Get decision support (drug repositories, protocols, etc...)</li>
<li>Determine the treatment targets</li>
<li>Add or remove treatment from existing patient treatment plan</li>
<li>Plan the treatment</li>
<li>Administer treatment</li>
<li>Evaluate the treatment (is essentially step 1 - 4)</li>
</ol>
</br>
</br>
<p><strong> The Medication Cycle </strong>
<img src="https://docs.google.com/drawings/d/1NP8mq1Pu6UYbBp51DUmkQoo8tz3769VDbiEoDoPQ2IE/pub?w=744&amp;h=520"></p>
</br>
</br>
<p>GenTreat combines in the <em>medication cycle</em> decision support with treatment
evaluation and order generation.</p>
</br>
</br>
<p><strong>Contents:</strong></p>
<ul>
<li><a href="#The-domain-model">The domain model</a></li>
<li><a href="#Implementation-of-the-model">Implementation of the Model</a></li>
<li><a href="#Test-the-implementation">Test the implementation</a></li>
</ul>
</br>
</br>
<h2><a name="The-domain-model" class="anchor" href="#The-domain-model">The domain model</a></h2>
<p>A patient type is needed to model the patient that is
receiving treatment. The patient type needs to contain
data relevant to identify a patient for treatment. For
now a simple string is used.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// The patient who is receiving treatment</span>
<span class="k">type</span> <span class="t">Patient</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="p">Patient</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="t">string</span>
</code></pre></td>
</tr>
</table>
<p>Next a patient exhibits signs, these signs can be
used to define targets and/or conditions.
</br>
For example:</p>
<ul>
<li>
Bloodpressure: target is keeping the bloodpressure
above 60, or as a condition, a bloodpressure of above
160 signifies high bloodpressure
</li>
<li>
Painscore: whether or not and how much pain a patient
experiences
</li>
<li>Liverfailure: whether or not a patient has liverfailure</li>
<li>
Central Venous Line: whether or not a patient has a
central venous line.
</li>
</ul>
<p>But signs can also be generalized as any patient data that
could influence treatment, like age, weight, past medical
history, etc..
</br></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// A Sign is any patient sympton or measurement</span>
<span class="c">/// relevant to treatment</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">Sign</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="p">BloodPressure</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="t">int</span>
    | <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="p">PainScore</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="t">int</span>
    | <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="p">LiverFailure</span>
    | <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="p">CentralVenousLine</span>
</code></pre></td>
</tr>
</table>
<p>A patient is associated with a list of signs.
A patient can have zero or more signs.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// The list of signs a patient exhibits</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="t">PatientSigns</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="p">PatientSigns</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs1', 12)" onmouseover="showTip(event, 'fs1', 12)" class="t">Patient</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs3', 13)" onmouseover="showTip(event, 'fs3', 13)" class="t">Sign</span> <span onmouseout="hideTip(event, 'fs10', 14)" onmouseover="showTip(event, 'fs10', 14)" class="t">list</span>
</code></pre></td>
</tr>
</table>
<p>A target is defigned by whether a target is reached,
or not. Given a patient sign this is determined by a
function that returnes a true or false. When the target
is a blood pressure above 60, then the function will
evaluate the blood pressure sign an return true if the
blood pressure is above 60. If the sign is any other sign
it will also return true.</p>
<p>So, a treatment indication is explicitly a target that is not met.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// The Target to achieve by treatment</span>
<span class="c">/// For example:</span>
<span class="c">/// blood pressure &gt; 60 mmHg</span>
<span class="c">/// pain score &lt; 1</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="t">Target</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 16)" onmouseover="showTip(event, 'fs11', 16)" class="p">Target</span> <span class="k">of</span> (<span onmouseout="hideTip(event, 'fs3', 17)" onmouseover="showTip(event, 'fs3', 17)" class="t">Sign</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs12', 18)" onmouseover="showTip(event, 'fs12', 18)" class="t">bool</span>)
</code></pre></td>
</tr>
</table>
<p>A condition is defined as a state the patient should
have or not have. This can be modelled by the presence or
absence of a target.</p>
<p>For example, the condition liverfailure is defined by
the sign Liverfailure. Absence or presence of a condition
is determined by matching a sign with the target.</p>
<p>In the case of liverfailure presence of a sign is enough.
But to describe for example low blood pressure, as defined
by the sign blood pressure, which is a number, a target is
needed.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// A Condition is determined by</span>
<span class="c">/// the result of a Target</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs13', 19)" onmouseover="showTip(event, 'fs13', 19)" class="t">Condition</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs14', 20)" onmouseover="showTip(event, 'fs14', 20)" class="p">Has</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs11', 21)" onmouseover="showTip(event, 'fs11', 21)" class="t">Target</span>
    | <span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="p">HasNot</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs11', 23)" onmouseover="showTip(event, 'fs11', 23)" class="t">Target</span>
</code></pre></td>
</tr>
</table>
<p>The order is the actual treatment order that is used
to achieve a target. This can be a medication order but
can also be an order concerning nutrition, ventilation etc..</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// The Order by which the Target can be achieved</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs16', 24)" onmouseover="showTip(event, 'fs16', 24)" class="t">Order</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 25)" onmouseover="showTip(event, 'fs16', 25)" class="p">Order</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs2', 26)" onmouseover="showTip(event, 'fs2', 26)" class="t">string</span>
</code></pre></td>
</tr>
</table>
<p>So, a treatment is the combination of a target and an order,
in which the order is used to achieve the target. In medical terms
the target can also be viewed as the indication. Only, the
indication can be low blood pressure, while a target can be
more specific, a blood pressure above 60, that can be evaluated.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// An Order to achieve a Target</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="t">Treatment</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="p">Treatment</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs11', 29)" onmouseover="showTip(event, 'fs11', 29)" class="t">Target</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs16', 30)" onmouseover="showTip(event, 'fs16', 30)" class="t">Order</span>
</code></pre></td>
</tr>
</table>
<p>The patient treatment is a patient with a list of treatments.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// The list of treatment for a patient</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="t">PatientTreatment</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 32)" onmouseover="showTip(event, 'fs18', 32)" class="p">PatientTreatment</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs1', 33)" onmouseover="showTip(event, 'fs1', 33)" class="t">Patient</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs17', 34)" onmouseover="showTip(event, 'fs17', 34)" class="t">Treatment</span> <span onmouseout="hideTip(event, 'fs10', 35)" onmouseover="showTip(event, 'fs10', 35)" class="t">list</span>
</code></pre></td>
</tr>
</table>
<p>Using a combination of conditions and a treatment it can be
determined if a treatment should be applied. When all the
conditions in the condition list are met, and the treatment
target is not achieved, there is an indication to start the
treatment.</p>
<p>For example, a patien is in pain, has no liverfaiure, then
treatment with paracetamol can be commenced. However, when the
patient has liver failure, paracetamol might be the wrong choice.
The protocol for paracetamol can be defined by the condition <em>has
not liverfailure</em> and the target <em>pain score &gt; 1</em></p>
<p>The next item in the protocol list could, for example, be
morfine. So, when the first step, paracetamol is not feasible,
the next step, morfine can be applied.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// A protocol is a list of Conditions and a Treatment</span>
<span class="c">/// ordered by precedence. If all Conditions in the</span>
<span class="c">/// Condition list are met and the Target is not met</span>
<span class="c">/// then the Treatment can be applied.</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs19', 36)" onmouseover="showTip(event, 'fs19', 36)" class="t">Protocol</span> <span class="o">=</span>  <span onmouseout="hideTip(event, 'fs19', 37)" onmouseover="showTip(event, 'fs19', 37)" class="p">Protocol</span> <span class="k">of</span> (<span onmouseout="hideTip(event, 'fs13', 38)" onmouseover="showTip(event, 'fs13', 38)" class="t">Condition</span> <span onmouseout="hideTip(event, 'fs10', 39)" onmouseover="showTip(event, 'fs10', 39)" class="t">list</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs17', 40)" onmouseover="showTip(event, 'fs17', 40)" class="t">Treatment</span>) <span onmouseout="hideTip(event, 'fs10', 41)" onmouseover="showTip(event, 'fs10', 41)" class="t">list</span>
</code></pre></td>
</tr>
</table>
<p>In order to evaluate a patient using a protocol, the protocol
is needed, the patient signs and the current patient treatment.</p>
<p>The result of the evaluation is a new patient treatment, in
which according to patient signs and the protocol, treatment is
added or removed, or the patient treatment is unchanged.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Evaluate a Patient whether all Targets</span>
<span class="c">/// in Protocol are met and add Treatment if</span>
<span class="c">/// Target is not met and Conditions are met</span>
<span class="c">/// or remove the Treatment if the Target is</span>
<span class="c">/// met or Conditions are not met.</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs20', 42)" onmouseover="showTip(event, 'fs20', 42)" class="t">EvaluateProtocol</span> <span class="o">=</span>
        (<span onmouseout="hideTip(event, 'fs19', 43)" onmouseover="showTip(event, 'fs19', 43)" class="t">Protocol</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs9', 44)" onmouseover="showTip(event, 'fs9', 44)" class="t">PatientSigns</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 45)" onmouseover="showTip(event, 'fs18', 45)" class="t">PatientTreatment</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 46)" onmouseover="showTip(event, 'fs18', 46)" class="t">PatientTreatment</span>)
</code></pre></td>
</tr>
</table>
<h2><a name="Implementation-of-the-model" class="anchor" href="#Implementation-of-the-model">Implementation of the model</a></h2>
<p>The following describes a sample implementation of the domain model.</p>
<p>First we need a patient so we create one with a simple string as
the patient id.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create patient</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 47)" onmouseover="showTip(event, 'fs21', 47)" class="f">createPatient</span> <span onmouseout="hideTip(event, 'fs22', 48)" onmouseover="showTip(event, 'fs22', 48)" class="i">s</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="i">s</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs1', 50)" onmouseover="showTip(event, 'fs1', 50)" class="p">Patient</span>
</code></pre></td>
</tr>
</table>
<p>Next we have to create some patient signs.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create signs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs23', 51)" onmouseover="showTip(event, 'fs23', 51)" class="f">createSign</span> <span onmouseout="hideTip(event, 'fs24', 52)" onmouseover="showTip(event, 'fs24', 52)" class="f">c</span> <span onmouseout="hideTip(event, 'fs25', 53)" onmouseover="showTip(event, 'fs25', 53)" class="i">s</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs25', 54)" onmouseover="showTip(event, 'fs25', 54)" class="i">s</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs24', 55)" onmouseover="showTip(event, 'fs24', 55)" class="f">c</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 56)" onmouseover="showTip(event, 'fs26', 56)" class="f">createBloodPressure</span>     <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 57)" onmouseover="showTip(event, 'fs23', 57)" class="f">createSign</span> <span onmouseout="hideTip(event, 'fs4', 58)" onmouseover="showTip(event, 'fs4', 58)" class="p">BloodPressure</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 59)" onmouseover="showTip(event, 'fs27', 59)" class="f">createPainScore</span>         <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 60)" onmouseover="showTip(event, 'fs23', 60)" class="f">createSign</span> <span onmouseout="hideTip(event, 'fs6', 61)" onmouseover="showTip(event, 'fs6', 61)" class="p">PainScore</span>
</code></pre></td>
</tr>
</table>
<p>And then we can connect those signs to a specific patient.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create and add to PatientSigns</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 62)" onmouseover="showTip(event, 'fs28', 62)" class="f">createPatienSigns</span> <span onmouseout="hideTip(event, 'fs29', 63)" onmouseover="showTip(event, 'fs29', 63)" class="i">p</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs29', 64)" onmouseover="showTip(event, 'fs29', 64)" class="i">p</span>, []) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 65)" onmouseover="showTip(event, 'fs9', 65)" class="p">PatientSigns</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 66)" onmouseover="showTip(event, 'fs30', 66)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs31', 67)" onmouseover="showTip(event, 'fs31', 67)" class="i">sgn</span> (<span onmouseout="hideTip(event, 'fs9', 68)" onmouseover="showTip(event, 'fs9', 68)" class="p">PatientSigns</span>(<span onmouseout="hideTip(event, 'fs29', 69)" onmouseover="showTip(event, 'fs29', 69)" class="i">p</span>, <span onmouseout="hideTip(event, 'fs32', 70)" onmouseover="showTip(event, 'fs32', 70)" class="i">sgns</span>)) <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs29', 71)" onmouseover="showTip(event, 'fs29', 71)" class="i">p</span>, <span onmouseout="hideTip(event, 'fs31', 72)" onmouseover="showTip(event, 'fs31', 72)" class="i">sgn</span><span class="o">::</span><span class="i">sgns</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 73)" onmouseover="showTip(event, 'fs9', 73)" class="p">PatientSigns</span>
</code></pre></td>
</tr>
</table>
<p>For example a 'Test Patient', with no current signs.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create a patient</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 74)" onmouseover="showTip(event, 'fs33', 74)" class="i">testPat</span> <span class="o">=</span> <span class="s">&quot;Test Patient&quot;</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 75)" onmouseover="showTip(event, 'fs21', 75)" class="f">createPatient</span>
<span class="c">// Create patient signs for that patient</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 76)" onmouseover="showTip(event, 'fs34', 76)" class="i">patsigns</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 77)" onmouseover="showTip(event, 'fs33', 77)" class="i">testPat</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs28', 78)" onmouseover="showTip(event, 'fs28', 78)" class="f">createPatienSigns</span>
</code></pre></td>
</tr>
</table>
<p>Targets and conditions are needed to construct protocols. In this
case we create a blood pressure and pain target. And we create a
liver failure condition and a central venous line condition.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create targets</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 81)" onmouseover="showTip(event, 'fs36', 81)" class="f">createTarget</span> <span onmouseout="hideTip(event, 'fs37', 82)" onmouseover="showTip(event, 'fs37', 82)" class="f">f</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 83)" onmouseover="showTip(event, 'fs37', 83)" class="f">f</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs11', 84)" onmouseover="showTip(event, 'fs11', 84)" class="p">Target</span>
<span class="c">// Create treatment targets</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs38', 85)" onmouseover="showTip(event, 'fs38', 85)" class="f">createBloodPressureTarget</span> <span onmouseout="hideTip(event, 'fs39', 86)" onmouseover="showTip(event, 'fs39', 86)" class="f">pred</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 87)" onmouseover="showTip(event, 'fs36', 87)" class="f">createTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs31', 88)" onmouseover="showTip(event, 'fs31', 88)" class="i">sgn</span> <span class="k">-&gt;</span>
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs31', 89)" onmouseover="showTip(event, 'fs31', 89)" class="i">sgn</span> <span class="k">with</span>
        | <span onmouseout="hideTip(event, 'fs4', 90)" onmouseover="showTip(event, 'fs4', 90)" class="p">BloodPressure</span> <span onmouseout="hideTip(event, 'fs40', 91)" onmouseover="showTip(event, 'fs40', 91)" class="i">bp</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 92)" onmouseover="showTip(event, 'fs40', 92)" class="i">bp</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs39', 93)" onmouseover="showTip(event, 'fs39', 93)" class="f">pred</span>
        | _ <span class="k">-&gt;</span> <span class="k">true</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 94)" onmouseover="showTip(event, 'fs41', 94)" class="f">createPainScoreTarget</span> <span onmouseout="hideTip(event, 'fs39', 95)" onmouseover="showTip(event, 'fs39', 95)" class="f">pred</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 96)" onmouseover="showTip(event, 'fs36', 96)" class="f">createTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs31', 97)" onmouseover="showTip(event, 'fs31', 97)" class="i">sgn</span> <span class="k">-&gt;</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs31', 98)" onmouseover="showTip(event, 'fs31', 98)" class="i">sgn</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs6', 99)" onmouseover="showTip(event, 'fs6', 99)" class="p">PainScore</span> <span onmouseout="hideTip(event, 'fs42', 100)" onmouseover="showTip(event, 'fs42', 100)" class="i">ps</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs42', 101)" onmouseover="showTip(event, 'fs42', 101)" class="i">ps</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs39', 102)" onmouseover="showTip(event, 'fs39', 102)" class="f">pred</span>
    | _ <span class="k">-&gt;</span> <span class="k">true</span>)

<span class="c">// Create conditions</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 103)" onmouseover="showTip(event, 'fs43', 103)" class="f">createCentralVenousLineCondition</span> <span onmouseout="hideTip(event, 'fs44', 104)" onmouseover="showTip(event, 'fs44', 104)" class="f">c</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs13', 105)" onmouseover="showTip(event, 'fs13', 105)" class="t">Condition</span> <span class="o">=</span>
    (<span onmouseout="hideTip(event, 'fs36', 106)" onmouseover="showTip(event, 'fs36', 106)" class="f">createTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs31', 107)" onmouseover="showTip(event, 'fs31', 107)" class="i">sgn</span> <span class="k">-&gt;</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs31', 108)" onmouseover="showTip(event, 'fs31', 108)" class="i">sgn</span> <span class="k">with</span>
            | <span onmouseout="hideTip(event, 'fs8', 109)" onmouseover="showTip(event, 'fs8', 109)" class="p">CentralVenousLine</span> <span class="k">-&gt;</span> <span class="k">true</span>
            | _ <span class="k">-&gt;</span> <span class="k">false</span>)) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 110)" onmouseover="showTip(event, 'fs44', 110)" class="f">c</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 111)" onmouseover="showTip(event, 'fs45', 111)" class="f">createLiverFailureCondition</span> <span onmouseout="hideTip(event, 'fs44', 112)" onmouseover="showTip(event, 'fs44', 112)" class="f">c</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs13', 113)" onmouseover="showTip(event, 'fs13', 113)" class="t">Condition</span> <span class="o">=</span>
    (<span onmouseout="hideTip(event, 'fs36', 114)" onmouseover="showTip(event, 'fs36', 114)" class="f">createTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs31', 115)" onmouseover="showTip(event, 'fs31', 115)" class="i">sgn</span> <span class="k">-&gt;</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs31', 116)" onmouseover="showTip(event, 'fs31', 116)" class="i">sgn</span> <span class="k">with</span>
            | <span onmouseout="hideTip(event, 'fs7', 117)" onmouseover="showTip(event, 'fs7', 117)" class="p">LiverFailure</span> <span class="k">-&gt;</span> <span class="k">true</span>
            | _ <span class="k">-&gt;</span> <span class="k">false</span>)) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 118)" onmouseover="showTip(event, 'fs44', 118)" class="f">c</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs46', 119)" onmouseover="showTip(event, 'fs46', 119)" class="f">createBloodPressureCondition</span> <span onmouseout="hideTip(event, 'fs39', 120)" onmouseover="showTip(event, 'fs39', 120)" class="f">pred</span> <span onmouseout="hideTip(event, 'fs44', 121)" onmouseover="showTip(event, 'fs44', 121)" class="f">c</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs13', 122)" onmouseover="showTip(event, 'fs13', 122)" class="t">Condition</span> <span class="o">=</span>
    (<span onmouseout="hideTip(event, 'fs36', 123)" onmouseover="showTip(event, 'fs36', 123)" class="f">createTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs31', 124)" onmouseover="showTip(event, 'fs31', 124)" class="i">sgn</span> <span class="k">-&gt;</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs31', 125)" onmouseover="showTip(event, 'fs31', 125)" class="i">sgn</span> <span class="k">with</span>
            | <span onmouseout="hideTip(event, 'fs4', 126)" onmouseover="showTip(event, 'fs4', 126)" class="p">BloodPressure</span> <span onmouseout="hideTip(event, 'fs47', 127)" onmouseover="showTip(event, 'fs47', 127)" class="i">bpl</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs47', 128)" onmouseover="showTip(event, 'fs47', 128)" class="i">bpl</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs39', 129)" onmouseover="showTip(event, 'fs39', 129)" class="f">pred</span>
            | _ <span class="k">-&gt;</span> <span class="k">true</span>)) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 130)" onmouseover="showTip(event, 'fs44', 130)" class="f">c</span>
</code></pre></td>
</tr>
</table>
<p>A specific blood pressure target could be the intention to keep the
blood pressure above 60. So the <em>target function</em> checks whether a
blood pressure sign is above 60. When the blood pressure falls below
60 the target is not met and the function returns false.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Bloodpressure targets</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 131)" onmouseover="showTip(event, 'fs48', 131)" class="i">bpTargetLt60</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs38', 132)" onmouseover="showTip(event, 'fs38', 132)" class="f">createBloodPressureTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs40', 133)" onmouseover="showTip(event, 'fs40', 133)" class="i">bp</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 134)" onmouseover="showTip(event, 'fs40', 134)" class="i">bp</span> <span class="o">&gt;</span> <span class="n">60</span>)
</code></pre></td>
</tr>
</table>
<p>Also, we want the patient to experience minimal or no pain as indicated
by a painscore of 1 or lower. Note that the target can be modified by
setting a threshold.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Pain target</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 135)" onmouseover="showTip(event, 'fs49', 135)" class="i">noPain</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 136)" onmouseover="showTip(event, 'fs41', 136)" class="f">createPainScoreTarget</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs50', 137)" onmouseover="showTip(event, 'fs50', 137)" class="i">sc</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs50', 138)" onmouseover="showTip(event, 'fs50', 138)" class="i">sc</span> <span class="o">&lt;=</span> <span class="n">1</span>)
</code></pre></td>
</tr>
</table>
<p>There are also some conditions that can determine whether or not
a treatment should be applied.
For example:</p>
<ul>
<li>
When the patient has a central venous line, noradrenaline can
be given.
</li>
<li>When the patient has no liverfailure, paracetamol can be given.</li>
<li>
When the patient has a blood pressure below 160, inotropics are
not contra-indicated.
</li>
</ul>
<p>Note, that these are just examples, not real medical constructs.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Condition targets</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 139)" onmouseover="showTip(event, 'fs51', 139)" class="i">hasCvlCond</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 140)" onmouseover="showTip(event, 'fs43', 140)" class="f">createCentralVenousLineCondition</span> <span onmouseout="hideTip(event, 'fs14', 141)" onmouseover="showTip(event, 'fs14', 141)" class="p">Has</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 142)" onmouseover="showTip(event, 'fs52', 142)" class="i">noLvfCond</span>   <span class="o">=</span> <span onmouseout="hideTip(event, 'fs45', 143)" onmouseover="showTip(event, 'fs45', 143)" class="f">createLiverFailureCondition</span> <span onmouseout="hideTip(event, 'fs15', 144)" onmouseover="showTip(event, 'fs15', 144)" class="p">HasNot</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 145)" onmouseover="showTip(event, 'fs53', 145)" class="i">bpCondSt160</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs46', 146)" onmouseover="showTip(event, 'fs46', 146)" class="f">createBloodPressureCondition</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs40', 147)" onmouseover="showTip(event, 'fs40', 147)" class="i">bp</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 148)" onmouseover="showTip(event, 'fs40', 148)" class="i">bp</span> <span class="o">&lt;</span> <span class="n">160</span>) <span onmouseout="hideTip(event, 'fs14', 149)" onmouseover="showTip(event, 'fs14', 149)" class="p">Has</span>
</code></pre></td>
</tr>
</table>
<p>Lets create a set of possible patient signs a patient can show.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Signs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 150)" onmouseover="showTip(event, 'fs54', 150)" class="i">bp40</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 151)" onmouseover="showTip(event, 'fs26', 151)" class="f">createBloodPressure</span> <span class="n">40</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 152)" onmouseover="showTip(event, 'fs55', 152)" class="i">pain</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs27', 153)" onmouseover="showTip(event, 'fs27', 153)" class="f">createPainScore</span> <span class="n">3</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 154)" onmouseover="showTip(event, 'fs56', 154)" class="i">cvl</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 155)" onmouseover="showTip(event, 'fs8', 155)" class="p">CentralVenousLine</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 156)" onmouseover="showTip(event, 'fs57', 156)" class="i">lvf</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 157)" onmouseover="showTip(event, 'fs7', 157)" class="p">LiverFailure</span>
</code></pre></td>
</tr>
</table>
<p>We the can add these signs to the test patient.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Add patient signs</span>
<span onmouseout="hideTip(event, 'fs34', 158)" onmouseover="showTip(event, 'fs34', 158)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 159)" onmouseover="showTip(event, 'fs30', 159)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs54', 160)" onmouseover="showTip(event, 'fs54', 160)" class="i">bp40</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 161)" onmouseover="showTip(event, 'fs30', 161)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 162)" onmouseover="showTip(event, 'fs55', 162)" class="i">pain</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 163)" onmouseover="showTip(event, 'fs30', 163)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs56', 164)" onmouseover="showTip(event, 'fs56', 164)" class="i">cvl</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 165)" onmouseover="showTip(event, 'fs30', 165)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs57', 166)" onmouseover="showTip(event, 'fs57', 166)" class="i">lvf</span>
</code></pre></td>
</tr>
</table>
<p>We now have patient signs, targets and conditions. But we need to
determine whether a target is met or a condition exists. The below
functions evaluate a list of signs and return whether a target or
condition is met.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Check if target is met according to signs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs58', 167)" onmouseover="showTip(event, 'fs58', 167)" class="f">targetIsMet</span> (<span onmouseout="hideTip(event, 'fs11', 168)" onmouseover="showTip(event, 'fs11', 168)" class="p">Target</span>(<span onmouseout="hideTip(event, 'fs37', 169)" onmouseover="showTip(event, 'fs37', 169)" class="f">f</span>)) <span onmouseout="hideTip(event, 'fs32', 170)" onmouseover="showTip(event, 'fs32', 170)" class="i">sgns</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs32', 171)" onmouseover="showTip(event, 'fs32', 171)" class="i">sgns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 172)" onmouseover="showTip(event, 'fs59', 172)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs60', 173)" onmouseover="showTip(event, 'fs60', 173)" class="f">forall</span> <span onmouseout="hideTip(event, 'fs37', 174)" onmouseover="showTip(event, 'fs37', 174)" class="f">f</span>

<span class="c">// Check if condition is met according to signs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 175)" onmouseover="showTip(event, 'fs61', 175)" class="f">conditionIsMet</span> <span onmouseout="hideTip(event, 'fs62', 176)" onmouseover="showTip(event, 'fs62', 176)" class="i">cond</span> <span onmouseout="hideTip(event, 'fs32', 177)" onmouseover="showTip(event, 'fs32', 177)" class="i">sgns</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs62', 178)" onmouseover="showTip(event, 'fs62', 178)" class="i">cond</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs14', 179)" onmouseover="showTip(event, 'fs14', 179)" class="p">Has</span> (<span onmouseout="hideTip(event, 'fs11', 180)" onmouseover="showTip(event, 'fs11', 180)" class="p">Target</span>(<span onmouseout="hideTip(event, 'fs37', 181)" onmouseover="showTip(event, 'fs37', 181)" class="f">f</span>))    <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs32', 182)" onmouseover="showTip(event, 'fs32', 182)" class="i">sgns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 183)" onmouseover="showTip(event, 'fs59', 183)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 184)" onmouseover="showTip(event, 'fs63', 184)" class="f">exists</span> <span onmouseout="hideTip(event, 'fs37', 185)" onmouseover="showTip(event, 'fs37', 185)" class="f">f</span>
    | <span onmouseout="hideTip(event, 'fs15', 186)" onmouseover="showTip(event, 'fs15', 186)" class="p">HasNot</span> (<span onmouseout="hideTip(event, 'fs11', 187)" onmouseover="showTip(event, 'fs11', 187)" class="p">Target</span>(<span onmouseout="hideTip(event, 'fs37', 188)" onmouseover="showTip(event, 'fs37', 188)" class="f">f</span>)) <span class="k">-&gt;</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs32', 189)" onmouseover="showTip(event, 'fs32', 189)" class="i">sgns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 190)" onmouseover="showTip(event, 'fs59', 190)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 191)" onmouseover="showTip(event, 'fs64', 191)" class="f">isEmpty</span> <span class="k">then</span> <span class="k">true</span>
        <span class="k">else</span> <span onmouseout="hideTip(event, 'fs32', 192)" onmouseover="showTip(event, 'fs32', 192)" class="i">sgns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 193)" onmouseover="showTip(event, 'fs59', 193)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 194)" onmouseover="showTip(event, 'fs63', 194)" class="f">exists</span> <span onmouseout="hideTip(event, 'fs37', 195)" onmouseover="showTip(event, 'fs37', 195)" class="f">f</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 196)" onmouseover="showTip(event, 'fs65', 196)" class="f">not</span>
</code></pre></td>
</tr>
</table>
<p>To define treatment, orders are needed to achieve the treatment
target. In this case we create parecetamol, morfine, dopamine and
noradrenaline orders.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create an Order</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs66', 220)" onmouseover="showTip(event, 'fs66', 220)" class="f">createOrder</span> <span onmouseout="hideTip(event, 'fs67', 221)" onmouseover="showTip(event, 'fs67', 221)" class="i">ord</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs67', 222)" onmouseover="showTip(event, 'fs67', 222)" class="i">ord</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 223)" onmouseover="showTip(event, 'fs16', 223)" class="p">Order</span>

<span class="c">// Create some test orders</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs68', 224)" onmouseover="showTip(event, 'fs68', 224)" class="i">pcm</span>  <span class="o">=</span> <span class="s">&quot;paracetamol&quot;</span>   <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs66', 225)" onmouseover="showTip(event, 'fs66', 225)" class="f">createOrder</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs69', 226)" onmouseover="showTip(event, 'fs69', 226)" class="i">morf</span> <span class="o">=</span> <span class="s">&quot;morfine&quot;</span>       <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs66', 227)" onmouseover="showTip(event, 'fs66', 227)" class="f">createOrder</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs70', 228)" onmouseover="showTip(event, 'fs70', 228)" class="i">dopa</span> <span class="o">=</span> <span class="s">&quot;dopamine&quot;</span>      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs66', 229)" onmouseover="showTip(event, 'fs66', 229)" class="f">createOrder</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs71', 230)" onmouseover="showTip(event, 'fs71', 230)" class="i">nor</span>  <span class="o">=</span> <span class="s">&quot;noradrenaline&quot;</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs66', 231)" onmouseover="showTip(event, 'fs66', 231)" class="f">createOrder</span>
</code></pre></td>
</tr>
</table>
<p>Treatment is created simply by combining a target with an order.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create a Treatment</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs72', 232)" onmouseover="showTip(event, 'fs72', 232)" class="f">createTreatment</span> <span onmouseout="hideTip(event, 'fs73', 233)" onmouseover="showTip(event, 'fs73', 233)" class="i">targ</span> <span onmouseout="hideTip(event, 'fs74', 234)" onmouseover="showTip(event, 'fs74', 234)" class="i">ord</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs73', 235)" onmouseover="showTip(event, 'fs73', 235)" class="i">targ</span>, <span onmouseout="hideTip(event, 'fs74', 236)" onmouseover="showTip(event, 'fs74', 236)" class="i">ord</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 237)" onmouseover="showTip(event, 'fs17', 237)" class="p">Treatment</span>
</code></pre></td>
</tr>
</table>
<p>A treatment is the same as some other treatment when the orders
are the same (targets could differ). But the comparison is needed
to determine if the patient allready recieves treatment, i.e. order.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 238)" onmouseover="showTip(event, 'fs75', 238)" class="f">eqsTreatment</span> (<span onmouseout="hideTip(event, 'fs17', 239)" onmouseover="showTip(event, 'fs17', 239)" class="p">Treatment</span>(_, <span onmouseout="hideTip(event, 'fs76', 240)" onmouseover="showTip(event, 'fs76', 240)" class="i">ord1</span>)) (<span onmouseout="hideTip(event, 'fs17', 241)" onmouseover="showTip(event, 'fs17', 241)" class="p">Treatment</span>(_, <span onmouseout="hideTip(event, 'fs77', 242)" onmouseover="showTip(event, 'fs77', 242)" class="i">ord2</span>)) <span class="o">=</span> <span class="i">ord1</span> <span class="o">=</span> <span class="i">ord2</span>
</code></pre></td>
</tr>
</table>
<p>Here, treatment with paracetamol, morfine, dopamine and noradrenalin
are created. Paracetamol and morfine are used to relieve pain.
Dopamine and noradrenalin can be used to maintain the blood pressure
above 60.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create treatement examples</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 243)" onmouseover="showTip(event, 'fs78', 243)" class="i">pcmTreat</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs68', 244)" onmouseover="showTip(event, 'fs68', 244)" class="i">pcm</span>  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs72', 245)" onmouseover="showTip(event, 'fs72', 245)" class="f">createTreatment</span> <span onmouseout="hideTip(event, 'fs49', 246)" onmouseover="showTip(event, 'fs49', 246)" class="i">noPain</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 247)" onmouseover="showTip(event, 'fs79', 247)" class="i">morfTreat</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs69', 248)" onmouseover="showTip(event, 'fs69', 248)" class="i">morf</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs72', 249)" onmouseover="showTip(event, 'fs72', 249)" class="f">createTreatment</span> <span onmouseout="hideTip(event, 'fs49', 250)" onmouseover="showTip(event, 'fs49', 250)" class="i">noPain</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs80', 251)" onmouseover="showTip(event, 'fs80', 251)" class="i">dopaTreat</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs70', 252)" onmouseover="showTip(event, 'fs70', 252)" class="i">dopa</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs72', 253)" onmouseover="showTip(event, 'fs72', 253)" class="f">createTreatment</span> <span onmouseout="hideTip(event, 'fs48', 254)" onmouseover="showTip(event, 'fs48', 254)" class="i">bpTargetLt60</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs81', 255)" onmouseover="showTip(event, 'fs81', 255)" class="i">norTreat</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs71', 256)" onmouseover="showTip(event, 'fs71', 256)" class="i">nor</span>  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs72', 257)" onmouseover="showTip(event, 'fs72', 257)" class="f">createTreatment</span> <span onmouseout="hideTip(event, 'fs48', 258)" onmouseover="showTip(event, 'fs48', 258)" class="i">bpTargetLt60</span>
</code></pre></td>
</tr>
</table>
<p>To create protocol, a list of conditions is needed along
with a treatment.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create and add to a Protocol</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs82', 259)" onmouseover="showTip(event, 'fs82', 259)" class="f">createProtocol</span> <span onmouseout="hideTip(event, 'fs83', 260)" onmouseover="showTip(event, 'fs83', 260)" class="i">cnds</span> <span onmouseout="hideTip(event, 'fs84', 261)" onmouseover="showTip(event, 'fs84', 261)" class="i">trt</span> <span class="o">=</span> [(<span onmouseout="hideTip(event, 'fs83', 262)" onmouseover="showTip(event, 'fs83', 262)" class="i">cnds</span>, <span onmouseout="hideTip(event, 'fs84', 263)" onmouseover="showTip(event, 'fs84', 263)" class="i">trt</span>)] <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 264)" onmouseover="showTip(event, 'fs19', 264)" class="p">Protocol</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs85', 265)" onmouseover="showTip(event, 'fs85', 265)" class="f">nextStepInProtocol</span> <span onmouseout="hideTip(event, 'fs83', 266)" onmouseover="showTip(event, 'fs83', 266)" class="i">cnds</span> <span onmouseout="hideTip(event, 'fs84', 267)" onmouseover="showTip(event, 'fs84', 267)" class="i">trt</span> (<span onmouseout="hideTip(event, 'fs19', 268)" onmouseover="showTip(event, 'fs19', 268)" class="p">Protocol</span>(<span onmouseout="hideTip(event, 'fs86', 269)" onmouseover="showTip(event, 'fs86', 269)" class="i">trts</span>)) <span class="o">=</span>
    [(<span onmouseout="hideTip(event, 'fs83', 270)" onmouseover="showTip(event, 'fs83', 270)" class="i">cnds</span>, <span onmouseout="hideTip(event, 'fs84', 271)" onmouseover="showTip(event, 'fs84', 271)" class="i">trt</span>)] <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 272)" onmouseover="showTip(event, 'fs59', 272)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs87', 273)" onmouseover="showTip(event, 'fs87', 273)" class="f">append</span> <span class="i">trts</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 274)" onmouseover="showTip(event, 'fs19', 274)" class="p">Protocol</span>
</code></pre></td>
</tr>
</table>
<p>A pain protocol could look like this:</p>
<ol>
<li>
The first step is paracetamol, if no liver failure present
and the patient is in pain (the target)
</li>
<li>The next step is to add morfine or replace paracetamol with morfine.</li>
</ol>
<p>Note that in this case morfine doesn't have a condition other than
that first paracetamol should be evaluated.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create a pain protocol</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs88', 275)" onmouseover="showTip(event, 'fs88', 275)" class="i">painProtocol</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs78', 276)" onmouseover="showTip(event, 'fs78', 276)" class="i">pcmTreat</span>
    <span class="c">// Give pcm if no liver failure and pain</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs82', 277)" onmouseover="showTip(event, 'fs82', 277)" class="f">createProtocol</span> [<span onmouseout="hideTip(event, 'fs52', 278)" onmouseover="showTip(event, 'fs52', 278)" class="i">noLvfCond</span>]
    <span class="c">// Give morfine if still pain</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs85', 279)" onmouseover="showTip(event, 'fs85', 279)" class="f">nextStepInProtocol</span> [] <span onmouseout="hideTip(event, 'fs79', 280)" onmouseover="showTip(event, 'fs79', 280)" class="i">morfTreat</span>
</code></pre></td>
</tr>
</table>
<p>A blood pressure protocol looks like:</p>
<ol>
<li>
First start with dopammine when the blood pressure
is lower than 60, a contraindication is a bloodpressure above 160
</li>
<li>
Next add noradrenalin if the patient has a central venous line
and, again, the bloodpressure is not above 160
</li>
</ol>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create a blood pressure protocol</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs89', 281)" onmouseover="showTip(event, 'fs89', 281)" class="i">bpProtocol</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs80', 282)" onmouseover="showTip(event, 'fs80', 282)" class="i">dopaTreat</span>
    <span class="c">// Start with dopa if bp &lt; 60 but no bp &gt; 160</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs82', 283)" onmouseover="showTip(event, 'fs82', 283)" class="f">createProtocol</span> [<span onmouseout="hideTip(event, 'fs53', 284)" onmouseover="showTip(event, 'fs53', 284)" class="i">bpCondSt160</span>]
    <span class="c">// Add nor if cvl and no bp &gt; 160</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs85', 285)" onmouseover="showTip(event, 'fs85', 285)" class="f">nextStepInProtocol</span> [<span onmouseout="hideTip(event, 'fs51', 286)" onmouseover="showTip(event, 'fs51', 286)" class="i">hasCvlCond</span>; <span onmouseout="hideTip(event, 'fs53', 287)" onmouseover="showTip(event, 'fs53', 287)" class="i">bpCondSt160</span>] <span onmouseout="hideTip(event, 'fs81', 288)" onmouseover="showTip(event, 'fs81', 288)" class="i">norTreat</span>
</code></pre></td>
</tr>
</table>
<p>A patient can be associated with a list of treatment. Treatment
can be added an removed from that list. The patient treatment is
the subject and result of an evaluation with a protocol.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create and add to patient treatment</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs90', 289)" onmouseover="showTip(event, 'fs90', 289)" class="f">createPatientTreatment</span> <span onmouseout="hideTip(event, 'fs91', 290)" onmouseover="showTip(event, 'fs91', 290)" class="i">testPat</span> <span onmouseout="hideTip(event, 'fs92', 291)" onmouseover="showTip(event, 'fs92', 291)" class="i">trts</span> <span class="o">=</span>
    (<span onmouseout="hideTip(event, 'fs91', 292)" onmouseover="showTip(event, 'fs91', 292)" class="i">testPat</span>, <span onmouseout="hideTip(event, 'fs92', 293)" onmouseover="showTip(event, 'fs92', 293)" class="i">trts</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs18', 294)" onmouseover="showTip(event, 'fs18', 294)" class="p">PatientTreatment</span>
<span class="c">// Add the treatment if not allready there</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs93', 295)" onmouseover="showTip(event, 'fs93', 295)" class="f">addPatientTreatment</span> <span onmouseout="hideTip(event, 'fs84', 296)" onmouseover="showTip(event, 'fs84', 296)" class="i">trt</span> (<span onmouseout="hideTip(event, 'fs18', 297)" onmouseover="showTip(event, 'fs18', 297)" class="p">PatientTreatment</span>(<span onmouseout="hideTip(event, 'fs91', 298)" onmouseover="showTip(event, 'fs91', 298)" class="i">testPat</span>, <span onmouseout="hideTip(event, 'fs92', 299)" onmouseover="showTip(event, 'fs92', 299)" class="i">trts</span>)) <span class="o">=</span>
    <span class="k">if</span> <span class="i">trts</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 300)" onmouseover="showTip(event, 'fs59', 300)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 301)" onmouseover="showTip(event, 'fs63', 301)" class="f">exists</span> (<span onmouseout="hideTip(event, 'fs75', 302)" onmouseover="showTip(event, 'fs75', 302)" class="f">eqsTreatment</span> <span onmouseout="hideTip(event, 'fs84', 303)" onmouseover="showTip(event, 'fs84', 303)" class="i">trt</span>) <span class="k">then</span>
        (<span onmouseout="hideTip(event, 'fs33', 304)" onmouseover="showTip(event, 'fs33', 304)" class="i">testPat</span>, <span class="i">trts</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs18', 305)" onmouseover="showTip(event, 'fs18', 305)" class="p">PatientTreatment</span>
    <span class="k">else</span> (<span onmouseout="hideTip(event, 'fs33', 306)" onmouseover="showTip(event, 'fs33', 306)" class="i">testPat</span>, <span onmouseout="hideTip(event, 'fs84', 307)" onmouseover="showTip(event, 'fs84', 307)" class="i">trt</span><span class="o">::</span><span class="i">trts</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs18', 308)" onmouseover="showTip(event, 'fs18', 308)" class="p">PatientTreatment</span>
<span class="c">// Remove the treatment if there</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 309)" onmouseover="showTip(event, 'fs94', 309)" class="f">removePatientTreatment</span> <span onmouseout="hideTip(event, 'fs84', 310)" onmouseover="showTip(event, 'fs84', 310)" class="i">trt</span> (<span onmouseout="hideTip(event, 'fs18', 311)" onmouseover="showTip(event, 'fs18', 311)" class="p">PatientTreatment</span>(<span onmouseout="hideTip(event, 'fs91', 312)" onmouseover="showTip(event, 'fs91', 312)" class="i">testPat</span>, <span onmouseout="hideTip(event, 'fs92', 313)" onmouseover="showTip(event, 'fs92', 313)" class="i">trts</span>)) <span class="o">=</span>
    (<span onmouseout="hideTip(event, 'fs33', 314)" onmouseover="showTip(event, 'fs33', 314)" class="i">testPat</span>, <span class="i">trts</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 315)" onmouseover="showTip(event, 'fs59', 315)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs95', 316)" onmouseover="showTip(event, 'fs95', 316)" class="f">filter</span>((<span onmouseout="hideTip(event, 'fs75', 317)" onmouseover="showTip(event, 'fs75', 317)" class="f">eqsTreatment</span> <span onmouseout="hideTip(event, 'fs84', 318)" onmouseover="showTip(event, 'fs84', 318)" class="i">trt</span>) <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs65', 319)" onmouseover="showTip(event, 'fs65', 319)" class="f">not</span>))
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs18', 320)" onmouseover="showTip(event, 'fs18', 320)" class="p">PatientTreatment</span>

<span class="c">// The treatment of the test patient example.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 321)" onmouseover="showTip(event, 'fs96', 321)" class="i">patTreatm</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs90', 322)" onmouseover="showTip(event, 'fs90', 322)" class="f">createPatientTreatment</span> <span onmouseout="hideTip(event, 'fs33', 323)" onmouseover="showTip(event, 'fs33', 323)" class="i">testPat</span> []
</code></pre></td>
</tr>
</table>
<p>Finally, patient treatment can be evaluated with a protocol
that uses patient signs to determine wheter conditions and
targets are met.</p>
<p>The algorythm will:</p>
<ul>
<li>
Add a treatment when conditions <em>are met</em> and the target
is <em>not met</em>
</li>
<li>
Remove a treatment when either conditions <em>are not met</em>
and/or the target <em>is met</em>
</li>
</ul>
<p>When a treatment allready is applied, the next item in the
protocol is used.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate a protocols</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs102', 360)" onmouseover="showTip(event, 'fs102', 360)" class="f">evaluateProtocol</span> <span onmouseout="hideTip(event, 'fs98', 361)" onmouseover="showTip(event, 'fs98', 361)" class="f">f</span> <span onmouseout="hideTip(event, 'fs103', 362)" onmouseover="showTip(event, 'fs103', 362)" class="i">prot</span> (<span onmouseout="hideTip(event, 'fs9', 363)" onmouseover="showTip(event, 'fs9', 363)" class="p">PatientSigns</span>(_, <span onmouseout="hideTip(event, 'fs32', 364)" onmouseover="showTip(event, 'fs32', 364)" class="i">sgns</span>)) <span onmouseout="hideTip(event, 'fs104', 365)" onmouseover="showTip(event, 'fs104', 365)" class="i">patTr</span> <span class="o">=</span>
    <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs105', 366)" onmouseover="showTip(event, 'fs105', 366)" class="f">eval</span> (<span onmouseout="hideTip(event, 'fs19', 367)" onmouseover="showTip(event, 'fs19', 367)" class="p">Protocol</span>(<span onmouseout="hideTip(event, 'fs106', 368)" onmouseover="showTip(event, 'fs106', 368)" class="i">xs</span>)) <span onmouseout="hideTip(event, 'fs107', 369)" onmouseover="showTip(event, 'fs107', 369)" class="i">acc</span> <span class="o">=</span>
        <span class="k">match</span> <span class="i">xs</span> <span class="k">with</span>
        | [] <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs107', 370)" onmouseover="showTip(event, 'fs107', 370)" class="i">acc</span>
        | <span onmouseout="hideTip(event, 'fs108', 371)" onmouseover="showTip(event, 'fs108', 371)" class="i">h</span><span class="o">::</span><span onmouseout="hideTip(event, 'fs109', 372)" onmouseover="showTip(event, 'fs109', 372)" class="i">rest</span> <span class="k">-&gt;</span>
            <span class="c">// The list of conditions for the treatment</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs83', 373)" onmouseover="showTip(event, 'fs83', 373)" class="i">cnds</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs108', 374)" onmouseover="showTip(event, 'fs108', 374)" class="i">h</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 375)" onmouseover="showTip(event, 'fs110', 375)" class="f">fst</span>
            <span class="c">// The treatment to consider</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 376)" onmouseover="showTip(event, 'fs84', 376)" class="i">trt</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs108', 377)" onmouseover="showTip(event, 'fs108', 377)" class="i">h</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs111', 378)" onmouseover="showTip(event, 'fs111', 378)" class="f">snd</span>
            <span class="c">// The treatment target</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs112', 379)" onmouseover="showTip(event, 'fs112', 379)" class="i">trg</span> <span class="o">=</span> <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs17', 380)" onmouseover="showTip(event, 'fs17', 380)" class="p">Treatment</span>(<span onmouseout="hideTip(event, 'fs112', 381)" onmouseover="showTip(event, 'fs112', 381)" class="i">trg</span>, _)) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs84', 382)" onmouseover="showTip(event, 'fs84', 382)" class="i">trt</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs112', 383)" onmouseover="showTip(event, 'fs112', 383)" class="i">trg</span>
            <span class="c">// Check whether all conditions are met</span>
            <span class="c">// according to the patient signals</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs113', 384)" onmouseover="showTip(event, 'fs113', 384)" class="i">condMet</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs83', 385)" onmouseover="showTip(event, 'fs83', 385)" class="i">cnds</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 386)" onmouseover="showTip(event, 'fs59', 386)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs60', 387)" onmouseover="showTip(event, 'fs60', 387)" class="f">forall</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs114', 388)" onmouseover="showTip(event, 'fs114', 388)" class="i">cnd</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs32', 389)" onmouseover="showTip(event, 'fs32', 389)" class="i">sgns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs61', 390)" onmouseover="showTip(event, 'fs61', 390)" class="f">conditionIsMet</span> <span onmouseout="hideTip(event, 'fs114', 391)" onmouseover="showTip(event, 'fs114', 391)" class="i">cnd</span>)
            <span class="c">// Check whether target is met according</span>
            <span class="c">// to the patient signals</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs115', 392)" onmouseover="showTip(event, 'fs115', 392)" class="i">targetMet</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs32', 393)" onmouseover="showTip(event, 'fs32', 393)" class="i">sgns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs58', 394)" onmouseover="showTip(event, 'fs58', 394)" class="f">targetIsMet</span> <span onmouseout="hideTip(event, 'fs112', 395)" onmouseover="showTip(event, 'fs112', 395)" class="i">trg</span>

            <span onmouseout="hideTip(event, 'fs101', 396)" onmouseover="showTip(event, 'fs101', 396)" class="f">sprintf</span> <span class="s">&quot;Conditions met: </span><span class="pf">%b</span><span class="s">, TargetMet: </span><span class="pf">%b</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs113', 397)" onmouseover="showTip(event, 'fs113', 397)" class="i">condMet</span> <span onmouseout="hideTip(event, 'fs115', 398)" onmouseover="showTip(event, 'fs115', 398)" class="i">targetMet</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs98', 399)" onmouseover="showTip(event, 'fs98', 399)" class="f">f</span>
            <span onmouseout="hideTip(event, 'fs101', 400)" onmouseover="showTip(event, 'fs101', 400)" class="f">sprintf</span> <span class="s">&quot;For treatment: </span><span class="pf">%A</span><span class="s">&quot;</span> (<span class="k">let</span> (<span onmouseout="hideTip(event, 'fs17', 401)" onmouseover="showTip(event, 'fs17', 401)" class="p">Treatment</span>(_, <span onmouseout="hideTip(event, 'fs74', 402)" onmouseover="showTip(event, 'fs74', 402)" class="i">ord</span>)) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs84', 403)" onmouseover="showTip(event, 'fs84', 403)" class="i">trt</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs74', 404)" onmouseover="showTip(event, 'fs74', 404)" class="i">ord</span>)
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs98', 405)" onmouseover="showTip(event, 'fs98', 405)" class="f">f</span>

            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs113', 406)" onmouseover="showTip(event, 'fs113', 406)" class="i">condMet</span>, <span onmouseout="hideTip(event, 'fs115', 407)" onmouseover="showTip(event, 'fs115', 407)" class="i">targetMet</span> <span class="k">with</span>
            <span class="c">// condition met, target not met</span>
            | <span class="k">true</span>, <span class="k">false</span> <span class="k">-&gt;</span>
                <span class="c">// First check if treatment is not allready there</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs116', 408)" onmouseover="showTip(event, 'fs116', 408)" class="i">hasNotTrt</span> <span class="o">=</span>
                    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 409)" onmouseover="showTip(event, 'fs92', 409)" class="i">trts</span> <span class="o">=</span> <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs18', 410)" onmouseover="showTip(event, 'fs18', 410)" class="p">PatientTreatment</span>(_, <span onmouseout="hideTip(event, 'fs92', 411)" onmouseover="showTip(event, 'fs92', 411)" class="i">trts</span>)) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs107', 412)" onmouseover="showTip(event, 'fs107', 412)" class="i">acc</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs92', 413)" onmouseover="showTip(event, 'fs92', 413)" class="i">trts</span>
                    <span onmouseout="hideTip(event, 'fs92', 414)" onmouseover="showTip(event, 'fs92', 414)" class="i">trts</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 415)" onmouseover="showTip(event, 'fs59', 415)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 416)" onmouseover="showTip(event, 'fs63', 416)" class="f">exists</span>(<span onmouseout="hideTip(event, 'fs75', 417)" onmouseover="showTip(event, 'fs75', 417)" class="f">eqsTreatment</span> <span onmouseout="hideTip(event, 'fs84', 418)" onmouseover="showTip(event, 'fs84', 418)" class="i">trt</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs65', 419)" onmouseover="showTip(event, 'fs65', 419)" class="f">not</span>
                <span class="k">if</span> <span onmouseout="hideTip(event, 'fs116', 420)" onmouseover="showTip(event, 'fs116', 420)" class="i">hasNotTrt</span> <span class="k">then</span>
                    <span class="c">// Add the treatment</span>
                    <span onmouseout="hideTip(event, 'fs107', 421)" onmouseover="showTip(event, 'fs107', 421)" class="i">acc</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs93', 422)" onmouseover="showTip(event, 'fs93', 422)" class="f">addPatientTreatment</span> <span onmouseout="hideTip(event, 'fs84', 423)" onmouseover="showTip(event, 'fs84', 423)" class="i">trt</span>
                    <span class="c">// And stop the evaluation</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs105', 424)" onmouseover="showTip(event, 'fs105', 424)" class="f">eval</span> ([] <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 425)" onmouseover="showTip(event, 'fs19', 425)" class="p">Protocol</span>)
                <span class="c">// Otherwise continue with the rest</span>
                <span class="k">else</span> <span onmouseout="hideTip(event, 'fs107', 426)" onmouseover="showTip(event, 'fs107', 426)" class="i">acc</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs105', 427)" onmouseover="showTip(event, 'fs105', 427)" class="f">eval</span> (<span onmouseout="hideTip(event, 'fs109', 428)" onmouseover="showTip(event, 'fs109', 428)" class="i">rest</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 429)" onmouseover="showTip(event, 'fs19', 429)" class="p">Protocol</span>)
            <span class="c">// conditions met, but target also met</span>
            | <span class="k">true</span>, <span class="k">true</span>
            <span class="c">// or conditions not met</span>
            | <span class="k">false</span>, _ <span class="k">-&gt;</span>
                <span class="c">// Remove the treatment if there</span>
                <span onmouseout="hideTip(event, 'fs107', 430)" onmouseover="showTip(event, 'fs107', 430)" class="i">acc</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs94', 431)" onmouseover="showTip(event, 'fs94', 431)" class="f">removePatientTreatment</span> <span onmouseout="hideTip(event, 'fs84', 432)" onmouseover="showTip(event, 'fs84', 432)" class="i">trt</span>
                <span class="c">// And continue the evaluation</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs105', 433)" onmouseover="showTip(event, 'fs105', 433)" class="f">eval</span> (<span onmouseout="hideTip(event, 'fs109', 434)" onmouseover="showTip(event, 'fs109', 434)" class="i">rest</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 435)" onmouseover="showTip(event, 'fs19', 435)" class="p">Protocol</span>)

    <span onmouseout="hideTip(event, 'fs105', 436)" onmouseover="showTip(event, 'fs105', 436)" class="f">eval</span> <span onmouseout="hideTip(event, 'fs103', 437)" onmouseover="showTip(event, 'fs103', 437)" class="i">prot</span> <span onmouseout="hideTip(event, 'fs104', 438)" onmouseover="showTip(event, 'fs104', 438)" class="i">patTr</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Test-the-implementation" class="anchor" href="#Test-the-implementation">Test the implementation</a></h2>
<p>The following code blocks test the implementation by examples.
In each code block the result of the evaluation is shown
as it appears in the <em>fsi</em> (code output window).</p>
<p>The first example tests what happens when the pain
protocol is applied to a patient without any signs.</p>
<p>The output reads that conditions are met, but
targets also are met, so, there is no indication
for treatment.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol for patient without signs</span>
<span class="c">// Expect: no treatment</span>
<span onmouseout="hideTip(event, 'fs96', 448)" onmouseover="showTip(event, 'fs96', 448)" class="i">patTreatm</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 449)" onmouseover="showTip(event, 'fs118', 449)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 450)" onmouseover="showTip(event, 'fs88', 450)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs34', 451)" onmouseover="showTip(event, 'fs34', 451)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 452)" onmouseover="showTip(event, 'fs119', 452)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: true </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: true </span>
<span class="fsi"> For treatment: Order &quot;morfine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi">  </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>However, if a patient is in pain, given a painscore
of 3, then paracetamol is added to the treatment in
absence of liverfailure.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol for patient with pain</span>
<span class="c">// Expect: paracetamol</span>
<span onmouseout="hideTip(event, 'fs34', 453)" onmouseover="showTip(event, 'fs34', 453)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 454)" onmouseover="showTip(event, 'fs30', 454)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 455)" onmouseover="showTip(event, 'fs55', 455)" class="i">pain</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 456)" onmouseover="showTip(event, 'fs120', 456)" class="i">signs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 457)" onmouseover="showTip(event, 'fs96', 457)" class="i">patTreatm</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 458)" onmouseover="showTip(event, 'fs118', 458)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 459)" onmouseover="showTip(event, 'fs88', 459)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 460)" onmouseover="showTip(event, 'fs120', 460)" class="i">signs</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 461)" onmouseover="showTip(event, 'fs119', 461)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - paracetamol </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>When the patient still has pain, and also has paracetamol,
the next step is to add morfine.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol for patient with pain and allready paracetemol</span>
<span class="c">// Expect: paracetamol and morfine</span>
<span onmouseout="hideTip(event, 'fs34', 462)" onmouseover="showTip(event, 'fs34', 462)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 463)" onmouseover="showTip(event, 'fs30', 463)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 464)" onmouseover="showTip(event, 'fs55', 464)" class="i">pain</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 465)" onmouseover="showTip(event, 'fs120', 465)" class="i">signs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 466)" onmouseover="showTip(event, 'fs96', 466)" class="i">patTreatm</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 467)" onmouseover="showTip(event, 'fs118', 467)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 468)" onmouseover="showTip(event, 'fs88', 468)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 469)" onmouseover="showTip(event, 'fs120', 469)" class="i">signs</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 470)" onmouseover="showTip(event, 'fs118', 470)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 471)" onmouseover="showTip(event, 'fs88', 471)" class="i">painProtocol</span> (<span onmouseout="hideTip(event, 'fs34', 472)" onmouseover="showTip(event, 'fs34', 472)" class="i">patsigns</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 473)" onmouseover="showTip(event, 'fs30', 473)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 474)" onmouseover="showTip(event, 'fs55', 474)" class="i">pain</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 475)" onmouseover="showTip(event, 'fs119', 475)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;morfine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - morfine </span>
<span class="fsi"> - paracetamol </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>A patient with pain but also liverfailure will skip the
paracetamol step but continue with morfine.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol for patient with pain but also liver failure</span>
<span class="c">// Expect: morfine</span>
<span onmouseout="hideTip(event, 'fs34', 476)" onmouseover="showTip(event, 'fs34', 476)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 477)" onmouseover="showTip(event, 'fs30', 477)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 478)" onmouseover="showTip(event, 'fs55', 478)" class="i">pain</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 479)" onmouseover="showTip(event, 'fs30', 479)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs57', 480)" onmouseover="showTip(event, 'fs57', 480)" class="i">lvf</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 481)" onmouseover="showTip(event, 'fs120', 481)" class="i">signs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 482)" onmouseover="showTip(event, 'fs96', 482)" class="i">patTreatm</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 483)" onmouseover="showTip(event, 'fs118', 483)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 484)" onmouseover="showTip(event, 'fs88', 484)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 485)" onmouseover="showTip(event, 'fs120', 485)" class="i">signs</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 486)" onmouseover="showTip(event, 'fs119', 486)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: false, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;morfine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - morfine </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>When the patient signs evolve from first pain and then pain,
but also liverfailure, at first the treatment is paracetamol,
but given liverfailure paracetamol is removed to be replaced
with morfine.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// First the patient has pain, then also liver failure</span>
<span class="c">// Evaluate pain protocol for patient with pain but also liver failure</span>
<span class="c">// Expect: first paracatamol, then only morfine</span>
<span onmouseout="hideTip(event, 'fs34', 487)" onmouseover="showTip(event, 'fs34', 487)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 488)" onmouseover="showTip(event, 'fs30', 488)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 489)" onmouseover="showTip(event, 'fs55', 489)" class="i">pain</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 490)" onmouseover="showTip(event, 'fs120', 490)" class="i">signs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 491)" onmouseover="showTip(event, 'fs96', 491)" class="i">patTreatm</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 492)" onmouseover="showTip(event, 'fs118', 492)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 493)" onmouseover="showTip(event, 'fs88', 493)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 494)" onmouseover="showTip(event, 'fs120', 494)" class="i">signs</span>)
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs121', 495)" onmouseover="showTip(event, 'fs121', 495)" class="i">pt</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs121', 496)" onmouseover="showTip(event, 'fs121', 496)" class="i">pt</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 497)" onmouseover="showTip(event, 'fs119', 497)" class="f">print</span>; <span onmouseout="hideTip(event, 'fs121', 498)" onmouseover="showTip(event, 'fs121', 498)" class="i">pt</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 499)" onmouseover="showTip(event, 'fs118', 499)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 500)" onmouseover="showTip(event, 'fs88', 500)" class="i">painProtocol</span> (<span onmouseout="hideTip(event, 'fs34', 501)" onmouseover="showTip(event, 'fs34', 501)" class="i">patsigns</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 502)" onmouseover="showTip(event, 'fs30', 502)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 503)" onmouseover="showTip(event, 'fs55', 503)" class="i">pain</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 504)" onmouseover="showTip(event, 'fs30', 504)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs57', 505)" onmouseover="showTip(event, 'fs57', 505)" class="i">lvf</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 506)" onmouseover="showTip(event, 'fs119', 506)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - paracetamol </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi"> Conditions met: false, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;morfine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - morfine </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>A patient that has a low blood pressure, but is evaluated by
the pain protocol, will not receive treatment.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol for patient with low blood pressure</span>
<span class="c">// Expect: No treatment</span>
<span onmouseout="hideTip(event, 'fs34', 507)" onmouseover="showTip(event, 'fs34', 507)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 508)" onmouseover="showTip(event, 'fs30', 508)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs54', 509)" onmouseover="showTip(event, 'fs54', 509)" class="i">bp40</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 510)" onmouseover="showTip(event, 'fs120', 510)" class="i">signs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 511)" onmouseover="showTip(event, 'fs96', 511)" class="i">patTreatm</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 512)" onmouseover="showTip(event, 'fs118', 512)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 513)" onmouseover="showTip(event, 'fs88', 513)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 514)" onmouseover="showTip(event, 'fs120', 514)" class="i">signs</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 515)" onmouseover="showTip(event, 'fs119', 515)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: true </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: true </span>
<span class="fsi"> For treatment: Order &quot;morfine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>If that patient not only has blood pressure, but also has
pain, then, given the pain protocol, paracetamol is added
to the treatment, but blood pressure remains untreated.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol for patient with pain and low blood pressure</span>
<span class="c">// Expect: paracetamol</span>
<span onmouseout="hideTip(event, 'fs34', 516)" onmouseover="showTip(event, 'fs34', 516)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 517)" onmouseover="showTip(event, 'fs30', 517)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs54', 518)" onmouseover="showTip(event, 'fs54', 518)" class="i">bp40</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 519)" onmouseover="showTip(event, 'fs30', 519)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 520)" onmouseover="showTip(event, 'fs55', 520)" class="i">pain</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 521)" onmouseover="showTip(event, 'fs120', 521)" class="i">signs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 522)" onmouseover="showTip(event, 'fs96', 522)" class="i">patTreatm</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 523)" onmouseover="showTip(event, 'fs118', 523)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 524)" onmouseover="showTip(event, 'fs88', 524)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 525)" onmouseover="showTip(event, 'fs120', 525)" class="i">signs</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 526)" onmouseover="showTip(event, 'fs119', 526)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - paracetamol </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>When both the pain and the blood pressure protocol are
evaluated, then the patient will receive both paracetamol
and dopamine.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate pain protocol and blood pressure protocol</span>
<span class="c">// for patient with pain and low blood pressure</span>
<span class="c">// Expect: paracetamol and dopamine</span>
<span onmouseout="hideTip(event, 'fs34', 527)" onmouseover="showTip(event, 'fs34', 527)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 528)" onmouseover="showTip(event, 'fs30', 528)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs54', 529)" onmouseover="showTip(event, 'fs54', 529)" class="i">bp40</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 530)" onmouseover="showTip(event, 'fs30', 530)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs55', 531)" onmouseover="showTip(event, 'fs55', 531)" class="i">pain</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 532)" onmouseover="showTip(event, 'fs120', 532)" class="i">signs</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs96', 533)" onmouseover="showTip(event, 'fs96', 533)" class="i">patTreatm</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 534)" onmouseover="showTip(event, 'fs118', 534)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs88', 535)" onmouseover="showTip(event, 'fs88', 535)" class="i">painProtocol</span> <span onmouseout="hideTip(event, 'fs120', 536)" onmouseover="showTip(event, 'fs120', 536)" class="i">signs</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 537)" onmouseover="showTip(event, 'fs118', 537)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs89', 538)" onmouseover="showTip(event, 'fs89', 538)" class="i">bpProtocol</span> <span onmouseout="hideTip(event, 'fs120', 539)" onmouseover="showTip(event, 'fs120', 539)" class="i">signs</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 540)" onmouseover="showTip(event, 'fs119', 540)" class="f">print</span>
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;paracetamol&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;dopamine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - dopamine </span>
<span class="fsi"> - paracetamol </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>The patient with low blood pressure but no central venous
line will not proceed to noradrenaline in the next evaluation.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Evaluate a blood pressure protocol for a patient</span>
<span class="c">// with low blood pressure, which still has low blood</span>
<span class="c">// pressure during the second evaluation but has no</span>
<span class="c">// central venous line</span>
<span class="c">// Expect: dopamine and then still only dopamine</span>
<span onmouseout="hideTip(event, 'fs34', 541)" onmouseover="showTip(event, 'fs34', 541)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 542)" onmouseover="showTip(event, 'fs30', 542)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs54', 543)" onmouseover="showTip(event, 'fs54', 543)" class="i">bp40</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 544)" onmouseover="showTip(event, 'fs120', 544)" class="i">signs</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs96', 545)" onmouseover="showTip(event, 'fs96', 545)" class="i">patTreatm</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 546)" onmouseover="showTip(event, 'fs118', 546)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs89', 547)" onmouseover="showTip(event, 'fs89', 547)" class="i">bpProtocol</span> <span onmouseout="hideTip(event, 'fs120', 548)" onmouseover="showTip(event, 'fs120', 548)" class="i">signs</span>
        <span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs121', 549)" onmouseover="showTip(event, 'fs121', 549)" class="i">pt</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs121', 550)" onmouseover="showTip(event, 'fs121', 550)" class="i">pt</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 551)" onmouseover="showTip(event, 'fs119', 551)" class="f">print</span>; <span onmouseout="hideTip(event, 'fs121', 552)" onmouseover="showTip(event, 'fs121', 552)" class="i">pt</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 553)" onmouseover="showTip(event, 'fs118', 553)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs89', 554)" onmouseover="showTip(event, 'fs89', 554)" class="i">bpProtocol</span> <span onmouseout="hideTip(event, 'fs120', 555)" onmouseover="showTip(event, 'fs120', 555)" class="i">signs</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 556)" onmouseover="showTip(event, 'fs119', 556)" class="f">print</span>)
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;dopamine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - dopamine </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;dopamine&quot; </span>
<span class="fsi"> Conditions met: false, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;noradrenaline&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - dopamine </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>
<p>Once the patient has a central venous line, noradrenaline
can be added to the treatment.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Now the patient has a central venous line</span>
<span class="c">// Expect: dopamine, then dopamine and noradrenalin</span>
<span onmouseout="hideTip(event, 'fs34', 557)" onmouseover="showTip(event, 'fs34', 557)" class="i">patsigns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 558)" onmouseover="showTip(event, 'fs30', 558)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs54', 559)" onmouseover="showTip(event, 'fs54', 559)" class="i">bp40</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 560)" onmouseover="showTip(event, 'fs30', 560)" class="f">addPatientSign</span> <span onmouseout="hideTip(event, 'fs56', 561)" onmouseover="showTip(event, 'fs56', 561)" class="i">cvl</span>
<span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs120', 562)" onmouseover="showTip(event, 'fs120', 562)" class="i">signs</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs96', 563)" onmouseover="showTip(event, 'fs96', 563)" class="i">patTreatm</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 564)" onmouseover="showTip(event, 'fs118', 564)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs89', 565)" onmouseover="showTip(event, 'fs89', 565)" class="i">bpProtocol</span> <span onmouseout="hideTip(event, 'fs120', 566)" onmouseover="showTip(event, 'fs120', 566)" class="i">signs</span>
        <span class="o">|&gt;</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs121', 567)" onmouseover="showTip(event, 'fs121', 567)" class="i">pt</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs121', 568)" onmouseover="showTip(event, 'fs121', 568)" class="i">pt</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 569)" onmouseover="showTip(event, 'fs119', 569)" class="f">print</span>; <span onmouseout="hideTip(event, 'fs121', 570)" onmouseover="showTip(event, 'fs121', 570)" class="i">pt</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 571)" onmouseover="showTip(event, 'fs118', 571)" class="f">evaluate</span> <span onmouseout="hideTip(event, 'fs89', 572)" onmouseover="showTip(event, 'fs89', 572)" class="i">bpProtocol</span> <span onmouseout="hideTip(event, 'fs120', 573)" onmouseover="showTip(event, 'fs120', 573)" class="i">signs</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs119', 574)" onmouseover="showTip(event, 'fs119', 574)" class="f">print</span>)
<span class="c">//</span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;dopamine&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - dopamine </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;dopamine&quot; </span>
<span class="fsi"> Conditions met: true, TargetMet: false </span>
<span class="fsi"> For treatment: Order &quot;noradrenaline&quot; </span>
<span class="fsi"> ------------------------ </span>
<span class="fsi">  </span>
<span class="fsi"> Treatment for: Test Patient </span>
<span class="fsi"> - noradrenaline </span>
<span class="fsi"> - dopamine </span>
<span class="fsi">  </span>
<span class="fsi"> ------------------------ </span>
</code></pre></td>
</tr>
</table>

<div class="tip" id="fs1">Multiple items<br />union case Patient.Patient: string -&gt; Patient<br /><br />--------------------<br />type Patient = | Patient of string<br /><br />Full name: Treatment.Patient<br /><em><br /><br />&#160;The patient who is receiving treatment</em></div>
<div class="tip" id="fs2">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs3">type Sign =<br />&#160;&#160;| BloodPressure of int<br />&#160;&#160;| PainScore of int<br />&#160;&#160;| LiverFailure<br />&#160;&#160;| CentralVenousLine<br /><br />Full name: Treatment.Sign<br /><em><br /><br />&#160;A Sign is any patient sympton or measurement<br />&#160;relevant to treatment</em></div>
<div class="tip" id="fs4">union case Sign.BloodPressure: int -&gt; Sign</div>
<div class="tip" id="fs5">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs6">union case Sign.PainScore: int -&gt; Sign</div>
<div class="tip" id="fs7">union case Sign.LiverFailure: Sign</div>
<div class="tip" id="fs8">union case Sign.CentralVenousLine: Sign</div>
<div class="tip" id="fs9">Multiple items<br />union case PatientSigns.PatientSigns: Patient * Sign list -&gt; PatientSigns<br /><br />--------------------<br />type PatientSigns = | PatientSigns of Patient * Sign list<br /><br />Full name: Treatment.PatientSigns<br /><em><br /><br />&#160;The list of signs a patient exhibits</em></div>
<div class="tip" id="fs10">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs11">Multiple items<br />union case Target.Target: (Sign -&gt; bool) -&gt; Target<br /><br />--------------------<br />type Target = | Target of (Sign -&gt; bool)<br /><br />Full name: Treatment.Target<br /><em><br /><br />&#160;The Target to achieve by treatment<br />&#160;For example:<br />&#160;blood pressure &gt; 60 mmHg<br />&#160;pain score &lt; 1</em></div>
<div class="tip" id="fs12">type bool = System.Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs13">type Condition =<br />&#160;&#160;| Has of Target<br />&#160;&#160;| HasNot of Target<br /><br />Full name: Treatment.Condition<br /><em><br /><br />&#160;A Condition is determined by<br />&#160;the result of a Target</em></div>
<div class="tip" id="fs14">union case Condition.Has: Target -&gt; Condition</div>
<div class="tip" id="fs15">union case Condition.HasNot: Target -&gt; Condition</div>
<div class="tip" id="fs16">Multiple items<br />union case Order.Order: string -&gt; Order<br /><br />--------------------<br />type Order = | Order of string<br /><br />Full name: Treatment.Order<br /><em><br /><br />&#160;The Order by which the Target can be achieved</em></div>
<div class="tip" id="fs17">Multiple items<br />union case Treatment.Treatment: Target * Order -&gt; Treatment<br /><br />--------------------<br />type Treatment = | Treatment of Target * Order<br /><br />Full name: Treatment.Treatment<br /><em><br /><br />&#160;An Order to achieve a Target</em></div>
<div class="tip" id="fs18">Multiple items<br />union case PatientTreatment.PatientTreatment: Patient * Treatment list -&gt; PatientTreatment<br /><br />--------------------<br />type PatientTreatment = | PatientTreatment of Patient * Treatment list<br /><br />Full name: Treatment.PatientTreatment<br /><em><br /><br />&#160;The list of treatment for a patient</em></div>
<div class="tip" id="fs19">Multiple items<br />union case Protocol.Protocol: (Condition list * Treatment) list -&gt; Protocol<br /><br />--------------------<br />type Protocol = | Protocol of (Condition list * Treatment) list<br /><br />Full name: Treatment.Protocol<br /><em><br /><br />&#160;A protocol is a list of Conditions and a Treatment<br />&#160;ordered by precedence. If all Conditions in the<br />&#160;Condition list are met and the Target is not met<br />&#160;then the Treatment can be applied.</em></div>
<div class="tip" id="fs20">type EvaluateProtocol = Protocol -&gt; PatientSigns -&gt; PatientTreatment -&gt; PatientTreatment<br /><br />Full name: Treatment.EvaluateProtocol<br /><em><br /><br />&#160;Evaluate a Patient whether all Targets<br />&#160;in Protocol are met and add Treatment if<br />&#160;Target is not met and Conditions are met<br />&#160;or remove the Treatment if the Target is<br />&#160;met or Conditions are not met.</em></div>
<div class="tip" id="fs21">val createPatient : s:string -&gt; Patient<br /><br />Full name: Treatment.createPatient</div>
<div class="tip" id="fs22">val s : string</div>
<div class="tip" id="fs23">val createSign : c:(&#39;a -&gt; &#39;b) -&gt; s:&#39;a -&gt; &#39;b<br /><br />Full name: Treatment.createSign</div>
<div class="tip" id="fs24">val c : (&#39;a -&gt; &#39;b)</div>
<div class="tip" id="fs25">val s : &#39;a</div>
<div class="tip" id="fs26">val createBloodPressure : (int -&gt; Sign)<br /><br />Full name: Treatment.createBloodPressure</div>
<div class="tip" id="fs27">val createPainScore : (int -&gt; Sign)<br /><br />Full name: Treatment.createPainScore</div>
<div class="tip" id="fs28">val createPatienSigns : p:Patient -&gt; PatientSigns<br /><br />Full name: Treatment.createPatienSigns</div>
<div class="tip" id="fs29">val p : Patient</div>
<div class="tip" id="fs30">val addPatientSign : sgn:Sign -&gt; PatientSigns -&gt; PatientSigns<br /><br />Full name: Treatment.addPatientSign</div>
<div class="tip" id="fs31">val sgn : Sign</div>
<div class="tip" id="fs32">val sgns : Sign list</div>
<div class="tip" id="fs33">val testPat : Patient<br /><br />Full name: Treatment.testPat</div>
<div class="tip" id="fs34">val patsigns : PatientSigns<br /><br />Full name: Treatment.patsigns</div>
<div class="tip" id="fs35">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs36">val createTarget : f:(Sign -&gt; bool) -&gt; Target<br /><br />Full name: Treatment.createTarget</div>
<div class="tip" id="fs37">val f : (Sign -&gt; bool)</div>
<div class="tip" id="fs38">val createBloodPressureTarget : pred:(int -&gt; bool) -&gt; Target<br /><br />Full name: Treatment.createBloodPressureTarget</div>
<div class="tip" id="fs39">val pred : (int -&gt; bool)</div>
<div class="tip" id="fs40">val bp : int</div>
<div class="tip" id="fs41">val createPainScoreTarget : pred:(int -&gt; bool) -&gt; Target<br /><br />Full name: Treatment.createPainScoreTarget</div>
<div class="tip" id="fs42">val ps : int</div>
<div class="tip" id="fs43">val createCentralVenousLineCondition : c:(Target -&gt; Condition) -&gt; Condition<br /><br />Full name: Treatment.createCentralVenousLineCondition</div>
<div class="tip" id="fs44">val c : (Target -&gt; Condition)</div>
<div class="tip" id="fs45">val createLiverFailureCondition : c:(Target -&gt; Condition) -&gt; Condition<br /><br />Full name: Treatment.createLiverFailureCondition</div>
<div class="tip" id="fs46">val createBloodPressureCondition : pred:(int -&gt; bool) -&gt; c:(Target -&gt; Condition) -&gt; Condition<br /><br />Full name: Treatment.createBloodPressureCondition</div>
<div class="tip" id="fs47">val bpl : int</div>
<div class="tip" id="fs48">val bpTargetLt60 : Target<br /><br />Full name: Treatment.bpTargetLt60</div>
<div class="tip" id="fs49">val noPain : Target<br /><br />Full name: Treatment.noPain</div>
<div class="tip" id="fs50">val sc : int</div>
<div class="tip" id="fs51">val hasCvlCond : Condition<br /><br />Full name: Treatment.hasCvlCond</div>
<div class="tip" id="fs52">val noLvfCond : Condition<br /><br />Full name: Treatment.noLvfCond</div>
<div class="tip" id="fs53">val bpCondSt160 : Condition<br /><br />Full name: Treatment.bpCondSt160</div>
<div class="tip" id="fs54">val bp40 : Sign<br /><br />Full name: Treatment.bp40</div>
<div class="tip" id="fs55">val pain : Sign<br /><br />Full name: Treatment.pain</div>
<div class="tip" id="fs56">val cvl : Sign<br /><br />Full name: Treatment.cvl</div>
<div class="tip" id="fs57">val lvf : Sign<br /><br />Full name: Treatment.lvf</div>
<div class="tip" id="fs58">val targetIsMet : Target -&gt; sgns:Sign list -&gt; bool<br /><br />Full name: Treatment.targetIsMet</div>
<div class="tip" id="fs59">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs60">val forall : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; bool<br /><br />Full name: Microsoft.FSharp.Collections.List.forall</div>
<div class="tip" id="fs61">val conditionIsMet : cond:Condition -&gt; sgns:Sign list -&gt; bool<br /><br />Full name: Treatment.conditionIsMet</div>
<div class="tip" id="fs62">val cond : Condition</div>
<div class="tip" id="fs63">val exists : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; bool<br /><br />Full name: Microsoft.FSharp.Collections.List.exists</div>
<div class="tip" id="fs64">val isEmpty : list:&#39;T list -&gt; bool<br /><br />Full name: Microsoft.FSharp.Collections.List.isEmpty</div>
<div class="tip" id="fs65">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs66">val createOrder : ord:string -&gt; Order<br /><br />Full name: Treatment.createOrder</div>
<div class="tip" id="fs67">val ord : string</div>
<div class="tip" id="fs68">val pcm : Order<br /><br />Full name: Treatment.pcm</div>
<div class="tip" id="fs69">val morf : Order<br /><br />Full name: Treatment.morf</div>
<div class="tip" id="fs70">val dopa : Order<br /><br />Full name: Treatment.dopa</div>
<div class="tip" id="fs71">val nor : Order<br /><br />Full name: Treatment.nor</div>
<div class="tip" id="fs72">val createTreatment : targ:Target -&gt; ord:Order -&gt; Treatment<br /><br />Full name: Treatment.createTreatment</div>
<div class="tip" id="fs73">val targ : Target</div>
<div class="tip" id="fs74">val ord : Order</div>
<div class="tip" id="fs75">val eqsTreatment : Treatment -&gt; Treatment -&gt; bool<br /><br />Full name: Treatment.eqsTreatment</div>
<div class="tip" id="fs76">val ord1 : Order</div>
<div class="tip" id="fs77">val ord2 : Order</div>
<div class="tip" id="fs78">val pcmTreat : Treatment<br /><br />Full name: Treatment.pcmTreat</div>
<div class="tip" id="fs79">val morfTreat : Treatment<br /><br />Full name: Treatment.morfTreat</div>
<div class="tip" id="fs80">val dopaTreat : Treatment<br /><br />Full name: Treatment.dopaTreat</div>
<div class="tip" id="fs81">val norTreat : Treatment<br /><br />Full name: Treatment.norTreat</div>
<div class="tip" id="fs82">val createProtocol : cnds:Condition list -&gt; trt:Treatment -&gt; Protocol<br /><br />Full name: Treatment.createProtocol</div>
<div class="tip" id="fs83">val cnds : Condition list</div>
<div class="tip" id="fs84">val trt : Treatment</div>
<div class="tip" id="fs85">val nextStepInProtocol : cnds:Condition list -&gt; trt:Treatment -&gt; Protocol -&gt; Protocol<br /><br />Full name: Treatment.nextStepInProtocol</div>
<div class="tip" id="fs86">val trts : (Condition list * Treatment) list</div>
<div class="tip" id="fs87">val append : list1:&#39;T list -&gt; list2:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.append</div>
<div class="tip" id="fs88">val painProtocol : Protocol<br /><br />Full name: Treatment.painProtocol</div>
<div class="tip" id="fs89">val bpProtocol : Protocol<br /><br />Full name: Treatment.bpProtocol</div>
<div class="tip" id="fs90">val createPatientTreatment : testPat:Patient -&gt; trts:Treatment list -&gt; PatientTreatment<br /><br />Full name: Treatment.createPatientTreatment</div>
<div class="tip" id="fs91">val testPat : Patient</div>
<div class="tip" id="fs92">val trts : Treatment list</div>
<div class="tip" id="fs93">val addPatientTreatment : trt:Treatment -&gt; PatientTreatment -&gt; PatientTreatment<br /><br />Full name: Treatment.addPatientTreatment</div>
<div class="tip" id="fs94">val removePatientTreatment : trt:Treatment -&gt; PatientTreatment -&gt; PatientTreatment<br /><br />Full name: Treatment.removePatientTreatment</div>
<div class="tip" id="fs95">val filter : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.filter</div>
<div class="tip" id="fs96">val patTreatm : PatientTreatment<br /><br />Full name: Treatment.patTreatm</div>
<div class="tip" id="fs97">val printTreatment : f:(string -&gt; unit) -&gt; PatientTreatment -&gt; unit<br /><br />Full name: Treatment.printTreatment</div>
<div class="tip" id="fs98">val f : (string -&gt; unit)</div>
<div class="tip" id="fs99">val pat : Patient</div>
<div class="tip" id="fs100">val n : string</div>
<div class="tip" id="fs101">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs102">val evaluateProtocol : f:(string -&gt; unit) -&gt; prot:Protocol -&gt; PatientSigns -&gt; patTr:PatientTreatment -&gt; PatientTreatment<br /><br />Full name: Treatment.evaluateProtocol</div>
<div class="tip" id="fs103">val prot : Protocol</div>
<div class="tip" id="fs104">val patTr : PatientTreatment</div>
<div class="tip" id="fs105">val eval : (Protocol -&gt; PatientTreatment -&gt; PatientTreatment)</div>
<div class="tip" id="fs106">val xs : (Condition list * Treatment) list</div>
<div class="tip" id="fs107">val acc : PatientTreatment</div>
<div class="tip" id="fs108">val h : Condition list * Treatment</div>
<div class="tip" id="fs109">val rest : (Condition list * Treatment) list</div>
<div class="tip" id="fs110">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs111">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Operators.snd</div>
<div class="tip" id="fs112">val trg : Target</div>
<div class="tip" id="fs113">val condMet : bool</div>
<div class="tip" id="fs114">val cnd : Condition</div>
<div class="tip" id="fs115">val targetMet : bool</div>
<div class="tip" id="fs116">val hasNotTrt : bool</div>
<div class="tip" id="fs117">val f : (string -&gt; unit)<br /><br />Full name: Treatment.f</div>
<div class="tip" id="fs118">val evaluate : (Protocol -&gt; PatientSigns -&gt; PatientTreatment -&gt; PatientTreatment)<br /><br />Full name: Treatment.evaluate</div>
<div class="tip" id="fs119">val print : (PatientTreatment -&gt; unit)<br /><br />Full name: Treatment.print</div>
<div class="tip" id="fs120">val signs : PatientSigns</div>
<div class="tip" id="fs121">val pt : PatientTreatment</div>

        </div>
        <div class="span3">
          <img src="/GenTreat/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">GenTreat</li>
            <li><a href="/GenTreat/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/Informedica.GenTreat.Lib">Get Library via NuGet</a></li>
            <li><a href="http://github.com/halcwb/GenTreat">Source Code on GitHub</a></li>
            <li><a href="/GenTreat/license.html">License</a></li>
            <li><a href="/GenTreat/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/GenTreat/tutorial.html">Sample tutorial</a></li>
            <li><a href="/GenTreat/treatment.html">Top Down Design</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/GenTreat/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/halcwb/GenTreat"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
